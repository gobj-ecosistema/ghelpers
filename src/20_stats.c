/***********************************************************************
 *          STATS_WR.C
 *
 *          Simple statistics handler, writer
 *
 *          Copyright (c) 2018 Niyamaka.
 *          All Rights Reserved.
***********************************************************************/
#include <inttypes.h>
#include "20_stats.h"

/***************************************************************
 *              Constants
 ***************************************************************/

/***************************************************************
 *              Structures
 ***************************************************************/

/***************************************************************
 *              Prototypes
 ***************************************************************/

/***************************************************************
 *              Data
 ***************************************************************/
PRIVATE const char *mask1[] = {
    "SEC",
    "MIN",
    "HOUR",
    "MDAY",
    "MON",
    "YEAR",
    "WDAY",
    "YDAY",
    "CENT",
    0
};

PRIVATE const char *mask2[] = {
    "%S",
    "%M",
    "%H",
    "%d",
    "%m",
    "%Y",
    "%u",
    "%j",
    "%C",
    0
};

/***************************************************************************
 *
 ***************************************************************************/
PUBLIC const char *filtra_time_mask(const char *mask)
{
    if(idx_in_list(mask2, mask, 0)) {
        return mask;
    }
    int idx = idx_in_list(mask1, mask, 0);
    if(idx>0) {
        return mask2[idx-1];
    }
    return mask;
}

